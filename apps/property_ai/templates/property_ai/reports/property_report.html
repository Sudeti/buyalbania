<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Property Investment Analysis Report</title>
</head>
<body>
    <!-- Page 1: Executive Summary & Market Position -->
    <div class="page-1">
        <!-- Header with Logo -->
        <div class="report-header">
            <div class="logo-section">
                <div class="logo">Property AI</div>
                <div class="tagline">Data-Driven Investment Intelligence</div>
            </div>
            <div class="report-meta">
                <div class="report-id">Report #{{ report_id }}</div>
                <div class="date">{{ generation_date|date:"M d, Y" }}</div>
            </div>
        </div>

        <!-- Property Title & Location -->
        <div class="property-header">
            <h1 class="property-title">{{ property_analysis.property_title|default:"Property Analysis" }}</h1>
            <div class="property-location">
                <i class="location-icon">üìç</i>
                {{ property_analysis.property_location|default:"Location not specified" }}
            </div>
        </div>

        <!-- Investment Score & Recommendation -->
        <div class="investment-summary">
            <div class="score-card">
                <div class="score-label">Investment Score</div>
                <div class="score-value">{{ investment_score|default:50 }}</div>
                <div class="score-max">/ 100</div>
                <div class="score-note">Data-Driven</div>
            </div>
            <div class="recommendation-card">
                <div class="recommendation-label">Recommendation</div>
                <div class="recommendation-value {{ recommendation|lower }}">{{ recommendation|default:"HOLD"|upper }}</div>
                <div class="recommendation-note">Based on {{ sample_size|default:0 }} comparable properties</div>
            </div>
        </div>

        <!-- Key Metrics Grid -->
        <div class="key-metrics">
            <div class="metric-card">
                <div class="metric-value">‚Ç¨{{ property_analysis.asking_price|default:"N/A"|floatformat:0 }}</div>
                <div class="metric-label">Asking Price</div>
            </div>
            <div class="metric-card">
                <div class="metric-value">{{ property_analysis.square_meters|default:"N/A" }} m¬≤</div>
                <div class="metric-label">Size</div>
            </div>
            <div class="metric-card">
                <div class="metric-value">‚Ç¨{{ price_per_sqm|floatformat:0 }}/m¬≤</div>
                <div class="metric-label">Price/m¬≤</div>
            </div>
            <div class="metric-card">
                <div class="metric-value">{{ gross_yield|floatformat:1 }}%</div>
                <div class="metric-label">Gross Yield</div>
            </div>
        </div>

        <!-- Executive Summary -->
        <div class="executive-summary">
            <h2>Executive Summary</h2>
            <p>{{ summary|default:"This property presents a compelling investment opportunity with strong fundamentals and favorable market positioning." }}</p>
        </div>

        <!-- Data-Driven Market Analysis -->
        {% if market_position %}
        <div class="market-analysis">
            <h2>Market Position Analysis</h2>
            <div class="market-metrics">
                <div class="market-metric">
                    <span class="metric-name">Market Percentile:</span>
                    <span class="metric-value {% if market_percentile <= 25 %}text-success{% elif market_percentile <= 50 %}text-primary{% else %}text-warning{% endif %}">
                        {{ market_percentile|floatformat:1 }}%
                    </span>
                </div>
                {% if potential_savings > 0 %}
                <div class="market-metric">
                    <span class="metric-name">Potential Savings:</span>
                    <span class="metric-value text-success">‚Ç¨{{ potential_savings|floatformat:0 }}</span>
                </div>
                {% endif %}
                {% if sample_size > 0 %}
                <div class="market-metric">
                    <span class="metric-name">Data Sources:</span>
                    <span class="metric-value">{{ sample_size }} comparable properties</span>
                </div>
                {% endif %}
            </div>
        </div>
        {% endif %}

        <!-- Investment Potential -->
        {% if investment_potential %}
        <div class="investment-potential">
            <h2>Investment Potential</h2>
            <div class="investment-metrics">
                <div class="investment-metric">
                    <div class="metric-value">{{ net_yield|floatformat:1 }}%</div>
                    <div class="metric-label">Net Annual Yield</div>
                </div>
                <div class="investment-metric">
                    <div class="metric-value">‚Ç¨{{ estimated_rent|floatformat:0 }}</div>
                    <div class="metric-label">Monthly Rent</div>
                </div>
                <div class="investment-metric">
                    <div class="metric-value">{{ total_return_5y|floatformat:1 }}%</div>
                    <div class="metric-label">5-Year Return</div>
                </div>
            </div>
        </div>
        {% endif %}
    </div>

    <!-- Page 2: Detailed Intelligence -->
    <div class="page-2">
        <!-- Market Momentum -->
        {% if market_momentum %}
        <div class="market-momentum">
            <h2>Market Intelligence</h2>
            <div class="momentum-metrics">
                <div class="momentum-metric">
                    <div class="metric-value {% if market_temperature == 'hot' %}text-danger{% elif market_temperature == 'warm' %}text-warning{% elif market_temperature == 'cool' %}text-info{% else %}text-secondary{% endif %}">
                        {{ market_temperature|title }}
                    </div>
                    <div class="metric-label">Market Temperature</div>
                </div>
                <div class="momentum-metric">
                    <div class="metric-value {% if price_momentum > 0 %}text-success{% else %}text-warning{% endif %}">
                        {{ price_momentum|floatformat:1 }}%
                    </div>
                    <div class="metric-label">30-Day Momentum</div>
                </div>
                <div class="momentum-metric">
                    <div class="metric-value">{{ timing_recommendation|title }}</div>
                    <div class="metric-label">Timing</div>
                </div>
            </div>
        </div>
        {% endif %}

        <!-- Agent Intelligence -->
        {% if agent_intelligence and agent_portfolio_size > 0 %}
        <div class="agent-intelligence">
            <h2>Agent Intelligence</h2>
            <div class="agent-metrics">
                <div class="agent-metric">
                    <div class="metric-value">{{ agent_portfolio_size }}</div>
                    <div class="metric-label">Properties Analyzed</div>
                </div>
                <div class="agent-metric">
                    <div class="metric-value {% if agent_vs_market > 0 %}text-warning{% else %}text-success{% endif %}">
                        {{ agent_vs_market|floatformat:1 }}%
                    </div>
                    <div class="metric-label">vs Market Average</div>
                </div>
                <div class="agent-metric">
                    <div class="metric-value {% if negotiation_potential == 'high' %}text-success{% elif negotiation_potential == 'medium' %}text-primary{% else %}text-warning{% endif %}">
                        {{ negotiation_potential|title }}
                    </div>
                    <div class="metric-label">Negotiation Potential</div>
                </div>
            </div>
        </div>
        {% endif %}

        <!-- Property Scarcity -->
        {% if scarcity_analysis %}
        <div class="scarcity-analysis">
            <h2>Property Scarcity</h2>
            <div class="scarcity-metrics">
                <div class="scarcity-metric">
                    <div class="metric-value {% if scarcity_score >= 80 %}text-success{% elif scarcity_score >= 60 %}text-primary{% else %}text-warning{% endif %}">
                        {{ scarcity_score|floatformat:0 }}
                    </div>
                    <div class="metric-label">Scarcity Score</div>
                </div>
                <div class="scarcity-metric">
                    <div class="metric-value">{{ similar_active }}</div>
                    <div class="metric-label">Similar Available</div>
                </div>
                <div class="scarcity-metric">
                    <div class="metric-value">{{ historical_demand }}</div>
                    <div class="metric-label">Sold (6 months)</div>
                </div>
            </div>
        </div>
        {% endif %}

        <!-- Market Insights -->
        {% if market_insights %}
        <div class="market-insights">
            <h2>Key Insights</h2>
            <ul class="insights-list">
                {% for insight in market_insights %}
                <li>{{ insight }}</li>
                {% endfor %}
            </ul>
        </div>
        {% endif %}

        <!-- Risk Factors -->
        {% if risk_factors %}
        <div class="risk-factors">
            <h2>Risk Considerations</h2>
            <ul class="risk-list">
                {% for risk in risk_factors %}
                <li>{{ risk }}</li>
                {% endfor %}
            </ul>
        </div>
        {% endif %}

        <!-- Action Items -->
        {% if action_items %}
        <div class="action-items">
            <h2>Recommended Actions</h2>
            <ul class="action-list">
                {% for action in action_items %}
                <li>{{ action }}</li>
                {% endfor %}
            </ul>
        </div>
        {% endif %}

        <!-- Data Sources -->
        {% if data_sources %}
        <div class="data-sources">
            <h2>Analysis Methodology</h2>
            <div class="data-metrics">
                <div class="data-metric">
                    <span class="metric-name">Comparable Properties:</span>
                    <span class="metric-value">{{ data_sources.comparable_properties|default:0 }}</span>
                </div>
                <div class="data-metric">
                    <span class="metric-name">Agent Properties:</span>
                    <span class="metric-value">{{ data_sources.agent_properties|default:0 }}</span>
                </div>
                <div class="data-metric">
                    <span class="metric-name">Market Data Points:</span>
                    <span class="metric-value">{{ data_sources.market_data_points|default:0 }}</span>
                </div>
                <div class="data-metric">
                    <span class="metric-name">Analysis Method:</span>
                    <span class="metric-value">{{ data_sources.analysis_method|default:"Data-Driven"|title }}</span>
                </div>
            </div>
        </div>
        {% endif %}

        <!-- Footer -->
        <div class="report-footer">
            <div class="footer-content">
                <div class="footer-left">
                    <div class="company-name">Property AI</div>
                    <div class="contact-info">Data-Driven Investment Intelligence</div>
                </div>
                <div class="footer-right">
                    <div class="report-info">Professional Analysis Report</div>
                    <div class="report-id-footer">ID: {{ report_id }}</div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>